<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <title>Sentimento Login</title>
    <meta name="generator" content="Bootply"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="//netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.min.css" rel="stylesheet">

    <link href="css/bootstrap-social.css" rel="stylesheet">
    <!--[if lt IE 9]>
    <script src="//html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link href="css/styles.css" rel="stylesheet">

    <!--These two were taken from original parse index.html-->
    <!--<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>-->
    <script type="text/javascript" src="http://www.parsecdn.com/js/parse-1.2.18.min.js"></script>

</head>

<body>

<script>
    // This is called with the results from from FB.getLoginStatus().
    /*    function statusChangeCallback(response) {
     console.log('statusChangeCallback');
     console.log(response); //is returned with a status field that lets the
     // app know the curren
     // The response objectt login status of the person.
     // Full docs on the response object can be found in the documentation
     // for FB.getLoginStatus().
     if (response.status === 'connected') {
     // Logged into your app and Facebook.
     testAPI();
     } else if (response.status === 'not_authorized') {
     // The person is logged into Facebook, but not your app.
     document.getElementById('status').innerHTML = 'Please log ' +
     'into this app.';
     } else {
     // The person is not logged into Facebook, so we're not sure if
     // they are logged into this app or not.
     document.getElementById('status').innerHTML = 'Please log ' +
     'into Facebook.';
     }
     }*/

    // This function is called when someone finishes with the Login
    // Button.  See the onlogin handler attached to it in the sample
    // code below.
    /*
     function checkLoginState() {
     FB.getLoginStatus(function (response) {
     statusChangeCallback(response);
     });
     }
     */


    window.fbAsyncInit = function () {
        Parse.FacebookUtils.init({
            appId: '235971699946352', // Facebook App ID
            channelUrl: '//sentimento.parseapp.com/channel.html', // Channel File
            cookie: true, // enable cookies to allow Parse to access the session
            xfbml: true  // parse XFBML
        });

        // Additional init code here
        FB.getLoginStatus(function (response) {
            if (response.status === 'connected') {
                // user logged in and linked to app
                document.getElementById('panel_logged_in').style.display = "";
            }
        });
    };


    // Load the SDK asynchronously
    (function (d, s, id) {
        var js, fjs = d.getElementsByTagName(s)[0];
        if (d.getElementById(id)) {
            return;
        }
        js = d.createElement(s);
        js.id = id;
        js.src = "//connect.facebook.net/en_US/all.js";
        fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'facebook-jssdk'));

    // Here we run a very simple test of the Graph API after login is
    // successful.  See statusChangeCallback() for when this call is made.
    /*    function testAPI() {
     console.log('Welcome!  Fetching your information.... ');
     FB.api('/me', function (response) {
     console.log('Successful login for: ' + response.name);
     document.getElementById('status').innerHTML =
     'Thanks for logging in, ' + response.name + '!';
     });
     }*/

    function sentimentoLogin() {
        console.log('Clicked');

        Parse.FacebookUtils.logIn("user_likes,user_activities,user_status", {
            success: function (user) {
                if (!user.existed()) {
                    console.log("New User signed up and logged in through Facebook!");
                    document.getElementById('panel_logged_in').style.display = "";
                } else {
                    console.log("User exists already and has been logged in through Facebook!");
                }
            },
            error: function (user, error) {
                document.getElementById('panel_logged_in').style.display = "none";
                alert("User cancelled the Facebook login or did not fully authorize.");
            }
        });
    }


</script>

<script type="text/javascript">
    Parse.initialize("NqximxNgr0SHfBnzlttUwbmIRuFJfWV6nea9N5jI", "0KitXvzwMe4NPk64VUeirTTJE4FqpTsdcPdgEnTs");



    function startSync() {
        document.getElementById('mood').innerHTML = "Fetching your mood...";
        Parse.Cloud.run('sync', {}, {
            success: function(result) {
                document.getElementById('mood').innerHTML = result;
            },
            error: function(error) {
                document.getElementById('mood').innerHTML = "There was an error: " + error;
            }
        });
    }
</script>



<div class="container-full">

    <div class="row">

        <div class="col-lg-12 text-center v-center">

            <h1>Welcome to Sentimento</h1>

            <p class="lead">A tool to inform you about your moods from your Facebook and Fitness App data</p>



            <br><br><br>

            <div class="col-lg-12">
                <div class="input-group" style="width:340px;text-align:center;margin:0 auto;">
                    <!--                <input class="form-control input-lg" title="Don't worry. We hate spam, and will not share your email with anyone." placeholder="Enter your email address" type="text">-->
                    <!--<span class="input-group-btn"><button class="btn btn-lg btn-primary" type="button">OK</button></span>-->

                    <a class="btn btn-block btn-social btn-facebook" onclick="sentimentoLogin()">
                        <i class="fa fa-facebook"></i> Sign in with Facebook
                    </a>





                    <a class="btn btn-block btn-social btn-reddit" onclick ="startSync()" >
                        <i class="fa fa-reddit"></i> Show me my mood
                        <div id="mood">
                        </div>
                    </a>







                </div>

            </div>
        </div>

    </div>
    <!-- /row -->


    <div class="row">

        <!--<div class="col-lg-12 text-center v-center" style="font-size:39pt;">-->
        <!--<a href="#"><i class="icon-google-plus"></i></a> <a href="#"><i class="icon-facebook"></i></a>  <a href="#"><i class="icon-twitter"></i></a> <a href="#"><i class="icon-github"></i></a> <a href="#"><i class="icon-pinterest"></i></a>-->
        <!--</div>-->

    </div>

    <br><br><br><br><br>

</div>
<!-- /container full -->

<div class="container">

    <hr>

    <div class="row">
        <div class="col-md-4">
            <div class="panel panel-default">
                <div class="panel-heading"><h3>Hello.</h3></div>
                <div class="panel-body">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis pharetra varius
                    quam sit amet vulputate.
                    Quisque mauris augue, molestie tincidunt condimentum vitae, gravida a libero. Aenean sit amet felis
                    dolor, in sagittis nisi. Sed ac orci quis tortor imperdiet venenatis. Duis elementum auctor
                    accumsan.
                    Aliquam in felis sit amet augue.
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="panel panel-default">
                <div class="panel-heading"><h3>Hello.</h3></div>
                <div class="panel-body">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis pharetra varius
                    quam sit amet vulputate.
                    Quisque mauris augue, molestie tincidunt condimentum vitae, gravida a libero. Aenean sit amet felis
                    dolor, in sagittis nisi. Sed ac orci quis tortor imperdiet venenatis. Duis elementum auctor
                    accumsan.
                    Aliquam in felis sit amet augue.
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="panel panel-default">
                <div class="panel-heading"><h3>Hello.</h3></div>
                <div class="panel-body">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis pharetra varius
                    quam sit amet vulputate.
                    Quisque mauris augue, molestie tincidunt condimentum vitae, gravida a libero. Aenean sit amet felis
                    dolor, in sagittis nisi. Sed ac orci quis tortor imperdiet venenatis. Duis elementum auctor
                    accumsan.
                    Aliquam in felis sit amet augue.
                </div>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-lg-12">
            <br><br>

            <p class="pull-right"><a href="http://www.bootply.com">Template from Bootply</a> &nbsp; Â©Copyright 2013 ACME<sup>TM</sup>
                Brand.</p>
            <br><br>
        </div>
    </div>
</div>


<!-- script references -->
<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.2/jquery.min.js"></script>
<script src="js/bootstrap.min.js"></script>
<script src="js/scripts.js"></script>














</body>
</html>